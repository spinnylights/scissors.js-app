"use strict";var Siz={};Siz.reverseWords=function(e){var r=new Siz._Page(e);return r.reverseWords()},Siz.reverseLines=function(e,r){var t=new Siz._Page(e,r);return t.reverseLines()},Siz.shuffleWords=function(e,r){var t=new Siz._Page(e);return t.shuffleWords(r)},Siz.shuffleLines=function(e,r,t){var i=new Siz._Page(e,t);return i.shuffleLines(r)},Siz.burSpl=function(e,r,t){var i=new Siz._Page(e,r);return i.burroughs(t,"not around words")},Siz.burWrd=function(e,r,t){var i=new Siz._Page(e,r);return i.burroughs(t,"around words")},Siz._Page=function(e,r){this.text=e,this.charsPerLine=r,"undefined"==typeof this.charsPerLine&&(this.charsPerLine=this.genCharsPerLine())},Siz._Page.prototype.genCharsPerLine=function(){var e=_.range(35,95);return _.sample(e)},Siz._Page.prototype.getWords=function(){return this.text.split(" ")},Siz._Page.prototype.shuffleWords=function(e){return"undefined"==typeof e&&(e=_.shuffle),e(this.getWords()).join(" ")},Siz._Page.prototype.shuffleLines=function(e){return"undefined"==typeof e&&(e=_.shuffle),e(this.groupWordsByCharLimit()).join("").trim()},Siz._Page.prototype.reverseWords=function(){var e=this.getWords().reverse();return e.join(" ")},Siz._Page.prototype.reverseLines=function(){var e=this.groupWordsByCharLimit().reverse();return e.join("").trim()},Siz._Page.prototype.halve=function(e,r){if("not around words"==e)return this.splitIntoHalfLines(r);if("around words"==e)return this.splitIntoHalfLinesAroundWords(r);throw new Error("halve() does not understand "+e)},Siz._Page.prototype.burroughs=function(e,r){var t="",i="",n="",o="",s=this.getWords();return"undefined"==typeof e&&(e=_.shuffle),t=this.halve(r,s),i=Siz._halfLinesIntoQuarters(t),n=e(i),o=Siz._joinQuarters(n),o.trim()},Siz._Page.prototype.burroughsSplit=function(e){var r=this.splitIntoHalfLines;"undefined"==typeof e&&(e=_.shuffle),this.burroughs(e,r)},Siz._Page.prototype.groupWordsByCharLimit=function(){for(var e="",r=[],t=this.getWords(),i=this.charsPerLine;t.length>0;){for(e="";e.length<=i;)t.length>0?e=e+t.shift()+" ":e+=" ";r.push(e)}return r},Siz._Page.prototype.splitIntoHalfLines=function(){var e=this.groupWordsByCharLimit(),r=[],t="",i="",n=0;return e.forEach(function(e){n=Math.ceil(e.length/2),t=e.slice(0,n),i=e.slice(n,e.length),r.push(t,i)}),r},Siz._Page.prototype.splitIntoHalfLinesAroundWords=function(){var e=this.groupWordsByCharLimit(),r=[],t=[],i="",n="",o="",s="",u=0;return e.forEach(function(e){t=e.split(" "),u=Math.ceil(t.length/2),i=t.slice(0,u),n=t.slice(u,e.length),o=i.join(" ")+" ",s=n.join(" "),r.push(o,s)}),r},Siz._halfLinesIntoQuarters=function(e){for(var r=[],t=[],i=0,n=0,o=[],s=[],u=[],h=[];e.length>0;)r.push(e.shift()),e[0]&&t.push(e.shift());return i=Math.floor(r.length/2),n=Math.floor(t.length/2),o=r.slice(0,i),s=t.slice(0,n),u=r.slice(i,r.length),h=t.slice(n,t.length),[o,s,u,h]},Siz._joinQuarters=function(e){for(var r="",t=[];e.length>0;){for(t.push(e.shift()),t.push(e.shift());t[0].length>0&&t[1].length>0;)r+=t[0].shift(),r+=t[1].shift();t=[]}return r};